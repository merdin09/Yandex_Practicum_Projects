# Исследование портрета клиентов регионального банка для уменьшения оттока.


**Задачи:** 

- оценить корректность проведения теста, в том числе проверить соответсвие теста техническому заданию,
- провести исследовательский анализ данных,
- провести оценку результатов A/B-тестирования,
- сделать выводы и рекомндации.



**Описание проекта:** 

Техническое задание:

Название теста: recommender_system_test;

Группы: А (контрольная), B (новая платёжная воронка);

Дата запуска: 2020-12-07;

Дата остановки набора новых пользователей: 2020-12-21;

Дата остановки: 2021-01-04;

Аудитория: 15% новых пользователей из региона EU;

Назначение теста: тестирование изменений, связанных с внедрением улучшенной рекомендательной системы;

Ожидаемое количество участников теста: 6000.

Ожидаемый эффект: за 14 дней с момента регистрации в системе пользователи покажут улучшение каждой метрики не менее, чем на 10%:

конверсии в просмотр карточек товаров — событие product_page

просмотры корзины — product_cart

покупки — purchase.



**Используемый стек**: pandas, matplotlib, seaborn, scipy, numpy, Tablue, math

## Выводы: ##

В таблицах `marketing_events`, `new_users`, `events` в стоблцах `start_dt`, `finish_dt`, `event_dt`, `first_date` изменили тип данных на `date`.

В таблице events столбец details имеет 377577 пропусков. Данный столбец содержит дополнительные данные о событии, например, для покупок, purchase, в этом поле хранится стоимость покупки в долларах.

Дубликатов не обнаружено


- дата начала теста совпадает с датой из ТЗ: 2020-12-07,


- дата остановки набора новых пользователей соответствует ТЗ: 2020-12-21; ,


- реальная дата остановки теста : 2020-12-30 что не соответствует ТЗ (дата в ТЗ: 2021-01-4),


- доля пользователей из EU в тесте от общего количества новых пользователей из EU составляет 15.0 %, что соответствует ТЗ,


- назначение теста: `recommender_system_test`


- всего имеем 12 636 пользователей, из них 3675 пользователей связанных с внедрением улучшенной рекомендательной системы (`recommender_system_test`) против 6000 ожидаемых,


- ни один из показателей воронки не показал улучшение после теста более чем на 10%


- обнаружен 431 пользователь, который попадает в тест recommender_system_test и в группу В теста interface_eu_test. Это 4 % от общего числа пользователей


- обнаружено два маркетинговых события (Christmas&New Year Promo и CIS New Year Gift Lottery), которые совпадают по времени с временем проведения теста, так нас интересуют конверсии эти данные не могли исказить результаты теста


- группа А почти в 3 раза больше группы В, группы достаточно большие и перекос распределения пользователей не должен повлиять на тест 


- в среднем 7 событий на пользователя, в среднем 7 событий на пользователя в группе А и 6 событий на пользователя в группе В. Статистический критерий Стьюдента показал равенство среднего числа событий на пользователя для групп А и В при уровне статистической значимости 0,5


- наибольше число событий приходится на 21 декабря 2020 года. Наблюдаем резкий скачок новых пользователей в группе А с     14 декабря 2020г, возможно ошибка в сборе данных


- для обеих групп А  и В больше всего пользователей теряется при переходе со страницы товара на сраницу корзины


- количество просмотров корзины в группе А и в группе В получилось меньше чем покупок, это может означать, что корзина не является обязательным этапом воронки, скорее всего существует функция покупки в 1 клик. Данная особенность не должна повлиять на АВ тест, такак наша конечная цель увеличить прибыль,  то есть количество покупок, при этом не уменьшая другие ключивые метрики.


Сформулированы гипотезы о равенстве конверсий пользователей между группами А и В для каждого события. 


Для события `product_page`:
```
H_0: Конверсия в просмотр карточек группы А = конверсии в просмотр карточек группы В
H_1: Конверсия в просмотр карточек группы А ≠ конверсии в просмотр карточек группы В
alpha = 0.05
```

Для события `product_cart`:
```
H_0: Конверсия в просмотр корзин группы А = конверсии в просмотр корзин группы В
H_1: Конверсия в просмотр корзин группы А ≠ конверсии в просмотр корзин группы В
alpha = 0.05
```
Для события `purchase`:
```
H_0: Конверсия в покупки группы А = конверсии в покупки группы В
H_1: Конверсия в покупки группы А ≠ конверсии в покупки группы В
alpha = 0.05
```
Делаем поправку alpha при множественных тестах методом Бонферрони.

По результатам теститрования конверсии в просмотр карточек товаров (`product_page`) у группы А и В неравны, конверсии в просмотры корзины (`product_cart`)  и конверсии в покупки (`purchase`) для групп А и В равны.



