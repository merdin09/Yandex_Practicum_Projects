# Проверка списка гипотез для увеличения выручки крупного интернет-магазина

**Задачи:**  Используя данные интернет-магазина приоритезировать гипотезы, произвести оценку результатов A/B-тестирования различными методами

**Описание проекта:** Проведена приоритизация гипотез по фреймворкам ICE и RICE. Затем проведен анализ результатов A/B-теста, построены графики кумулятивной выручки, среднего чека, конверсии по группам, а затем посчитаны статистическая значимость различий конверсий
и средних чеков по сырым и очищенным данным.

**Используемый стек**: pandas, seaborn, matplotlib, numpy, scipy

**Содержание:**

1.  Часть 1. Приоритизация гипотез.

    1.1  Применим фреймворк ICE для приоритизации гипотез. Отсортируем их по убыванию приоритета.  
    1.2  Применим фреймворк RICE для приоритизации гипотез. Отсортируем их по убыванию приоритета.

2.  Часть 2. Анализ A/B-теста

    2.1  Построим график кумулятивной выручки по группам.

        2.1.1  Проведем предобработку данных  
        2.1.2  Проведем исследование качества данных  
        2.1.3  Построим график кумулятивной выручки по группам.

    2.2  Построим график кумулятивного среднего чека по группам.  
    2.3  Построим график относительного изменения кумулятивного среднего чека группы B к группе A.  
    2.4  Построим график кумулятивного среднего количества заказов на посетителя по группам.  
    2.5  Построим график относительного изменения кумулятивного среднего количества заказов на посетителя группы B к группе A.  
    2.6  Построим точечный график количества заказов по пользователям.  
    2.7  Посчитаем 95-й и 99-й перцентили количества заказов на пользователя. Выберем границу для определения аномальных пользователей.  
    2.8  Построим точечный график стоимостей заказов.  
    2.9  Посчитаем 95-й и 99-й перцентили стоимости заказов. Выберем границу для определения аномальных заказов.  
    2.10  Посчитайтаем статистическую значимость различий в среднем количестве заказов на посетителя между группами по «сырым» данным.

        2.10.1  Сформируем таблицу количества посетителей по датам для групп А и В  
        2.10.2  Сформируем таблицу с кумулятивным количеством посетителей по датам для групп А и В  
        2.10.3  Сформируем таблицу с количеством заказов по датам для групп А и В  
        2.10.4  Сформируем таблицу с кумулятивным количеством заказов по датам для групп А и В  
        2.10.5  Соеденим все данные в одну таблицу по датам.  
        2.10.6  Посчитаем статистическую значимость различия в среднем количестве заказов между группами. 
        Создадим переменные ordersByUsersA и ordersByUsersB со столбцами ['userId', 'orders']. В них для пользователей, которые заказывали хотя бы 1 раз, укажем число совершённых заказов.

    2.11  Посчитаем статистическую значимость различий в среднем чеке заказа между группами по «сырым» данным.  
    2.12  Посчитаем статистическую значимость различий в среднем количестве заказов на посетителя между группами по «очищенным» данным.  
    2.13  Посчитаем статистическую значимость различий в среднем чеке заказа между группами по «очищенным» данным.  
    2.14  Вывод

## Выводы: ##

Перед проведение А/В теста провели предобработку данных:
- привели названия столбцов к нижнему и змеиному регистрам,
- проверили на наличие пропусков и дубликатов.

Построили следующие графики:

- график кумулятивной выручки по дням для групп А и В:

Выручка почти равномерно увеличивается в течение всего теста.
График выручки группы В резко растет 18 августа. Это может быть связано или с ростом числа заказов, или с появлении очень дорогих заказов в выборке. В целом выручка в группе В выше выручки в группе А.


- график среднего чека по дням для групп А и В:

Средняя выручка для группы А стала стабильной 15 августа и имеет слабый рост к концу теста. Средняя выручка группы В имеет скачок 18 августа и дальнейшее слабое снижение. Всплеск средней выручки в группе В может быть связан с наличием крупных или дорогих заказов в середине теста.

 
- график отсительного изменение кумулятивного среднего чека группы B к группе A:

В начале теста группа B значительно проигрывала группе A, затем вырвалась вперёд. Потом её конверсия к группе А снова падала, но затем резко возросла и со значения 0.5 начала плавное снижение. В целом по такому графику какие-либо выводы по тесту нельзя.

- график накопленного среднего количества заказов на посетителя для групп А и В:

В начале теста наблюдаются сильные колебания графиков. С 06 августа накопленное среднее число заказов на поситителя группы А стало снижаться, а группы В увеличиваться. К концу теста графики стабилизировались и значение группы А составило 0.03, а группы В 0.035, что на 16,6% выше. Возможно, мероприятия по увеличению выручки магазина привели к ее увеличению.


- график относительного изменения кумулятивного среднего количества заказов на одного поситителя группы B к группе A:

До 6 августа наблюдается колебание графика. После конверсия группы В к группе А резко возрастает и с середины теста начинает плавно снижаться до значения в 0.14 к концу теста. Это так же дает нап право предположить об успешности А/В теста.

- точечный график количества заказов по пользователям:

Большинство покупателей совершает 1 заказ. Но количество покупателей с 2-4 заказами тоже велико. Так же наблюдаем некоторое количество покупателей с заказами более 10. Предположим, что наличие пользователей, совершивших более 4 заказов, подтверждает всплеск выручки в середине теста.


Посчитали 95-й и 99-й перцентили количества заказов на пользователя. Не более 10% пользователей совершали более 1 заказа. Не болееь 5% совершали более 2 заказов. И только 1% совершал более 4 заказов. Выберем 2 заказа на одного пользователя за верхнюю границу числа заказов, что бы отсеять аномальных пользователей по ней.


- точечный график стоимостей заказов:

Большинство заказов имеют стоимость ниже 50 000, имеем некоторое количество заказов выше 50 000 и аномально большие закары со стоимостью примерно 200 000 и более 1 200 000, эти дорогие заказы могли повлиять на наше тестирование, спровацировав всплеск в группе В с середине тестирования

Посчитали 95-й и 99-й перцентили стоимости заказов. Не более 10% заказов имеют стоимость более 18168. Не болееь 5% имеют стоимость более 28000. И только 1% заказов имеют стоимость более 58233.2. Выберем стоимость заказа равную 28000 заказа за верхнюю границу.


Посчитали статистическую значимость различий в среднем количестве заказов на посетителя между группами А и В по «сырым» данным и «очищенным» данным:

- «сырые» данные: p-value = 0.017; относительный прирост = 13.8%
- «очищенные»: p-value = 0.013; относительный прирост = 17,3%

Статистический тест по «очищенным» данным подтверждает результат теста по "сырым" и говорит нам о том, что с вероятностью 98,696 среднее число заказов группы В выше чем группы А на 17,3 %. Следовательно, можно говорить о том, что нулевая гипотеза о равенстве среднего количества заказов не подтвердиласть.



Посчитали статистическую значимость различий в среднем чеке заказов группами А и В по «сырым» данным и «очищенным» данным:

- «сырые» данные: p-value = 0.729; относительный прирост = 25.9%
- «очищенные»: p-value = 0.738; относительный прирост = -2%

P-value значительно больше 0.05. Значит, причин отвергать нулевую гипотезу и считать, что в среднем чеке есть различия, нет. Но, средний чек группы B на 25.9% выше среднего чека группы A, что быть обусловлено наличием "дорогих" заказов.
0.729
0.259

P-value в обоих случаях значительно больше 0.05. Значит, причин отвергать нулевую гипотезу и считать, что в среднем чеке есть различия, нет.Cредний чек группы B выше суммы среднего чека группы A для «сырых» данных из за наличия аноиально дорогих заказов.  Cредний чек группы B почти равен сумме среднего чека группы A. (разница в 2 %) для «очищенных» данных. 

Исходя из вышеперечисленного, следует остановить тест, и зафиксировать различие между группами А и В по среднему количестве заказов.

